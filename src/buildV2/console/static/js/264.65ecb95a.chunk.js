"use strict";(self.webpackChunksunbird_obsrv=self.webpackChunksunbird_obsrv||[]).push([[264],{1195:(e,t,l)=>{l.d(t,{A:()=>h});var r=l(83462),s=l(98533),a=l(42518),n=l(81e3),i=l(4219),o=l(35316),c=l(29347),d=l(73012),u=l(70579);const h=e=>{let{handleClose:t,action:l=null,open:h=!1,context:m={}}=e;return m.show=void 0===m.show||m.show,(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.A,{open:h,onClose:t,children:(0,u.jsxs)(n.A,{sx:{p:1,py:1.5},children:[(0,u.jsx)(i.A,{children:null===m||void 0===m?void 0:m.title}),(0,u.jsxs)(o.A,{children:[(0,u.jsx)(s.A,{children:null===m||void 0===m?void 0:m.content}),null===m||void 0===m?void 0:m.component]}),!0===m.show&&(0,u.jsxs)(c.A,{children:[(0,u.jsx)(a.A,{"data-edataid":d.alert_dialog_cancel,color:"error",onClick:e=>t(),children:"Cancel"}),(0,u.jsx)(a.A,{"data-edataid":d.alert_dialog_agree,variant:"contained",onClick:()=>{l&&l(),t(!0)},autoFocus:!0,children:"Agree"})]})]})})})}},75359:(e,t,l)=>{l.d(t,{A:()=>m});var r=l(65043),s=l(74600),a=l(71806),n=l(84882),i=l(28076),o=l(10039),c=l(73460),d=l(71094),u=l(28912),h=l(70579);const m=function(e){let{columns:t,data:l,renderHeader:m}=e;const[A,v]=(0,r.useState)(l||[]),p=(0,r.useMemo)((()=>u.sB),[]),x=(0,r.useMemo)((()=>({Filter:u.ev})),[]),g=(0,r.useMemo)((()=>({filters:[],hiddenColumns:["tags"]})),[]),{getTableProps:f,getTableBodyProps:y,headerGroups:j,rows:w,prepareRow:b,state:C,preGlobalFilteredRows:F,setGlobalFilter:S,toggleRowExpanded:R}=(0,d.useTable)({columns:t,data:A,defaultColumn:x,initialState:g,filterTypes:p,autoResetExpanded:!1},d.useGlobalFilter,d.useFilters,d.useExpanded);return(0,r.useEffect)((()=>{v(l)}),[l]),(0,h.jsxs)(s.A,{spacing:2,children:[m?m({preGlobalFilteredRows:F,setGlobalFilter:S,toggleRowExpanded:R,state:C}):null,(0,h.jsxs)(a.A,{...f(),children:[(0,h.jsx)(n.A,{sx:{borderTopWidth:2},children:j.map((e=>(0,h.jsx)(i.A,{...e.getHeaderGroupProps(),children:e.headers.map((e=>{const{style:t={}}=e;return(0,h.jsx)(o.A,{style:t,...e.getHeaderProps([{className:e.className}]),children:e.render("Header")})}))})))}),(0,h.jsxs)(c.A,{...y(),children:[j.map((e=>(0,h.jsx)(i.A,{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,h.jsx)(o.A,{...e.getHeaderProps([{className:e.className}]),children:e.canFilter?e.render("Filter"):null})))}))),w.map((e=>(b(e),(0,h.jsx)(i.A,{...e.getRowProps(),children:e.cells.map((e=>(0,h.jsx)(o.A,{...e.getCellProps([{className:e.column.className}]),children:e.render("Cell")})))}))))]})]})]})}},55574:(e,t,l)=>{l.d(t,{D0:()=>i,WQ:()=>a,cp:()=>n});var r=l(53536),s=l.n(r);const a={type:"custom",searchQuery:{request:{filters:{"context.alertType":"CUSTOM"},options:{order:[["updatedAt","DESC"]]}}},allowedActions:["publish","view","edit","retire","back","refresh","silence"],list:{title:"Alert Rules",showAddAlertBtn:!0},edit:{editableFields:"*"},alerts_warning_message:"No Custom alert rules configured. Click on Add Alerts to create a Custom alert rule"},n={type:"system",searchQuery:{request:{filters:{"context.alertType":"SYSTEM"},options:{order:[["updatedAt","DESC"]]}}},allowedActions:["publish","view","edit","back","refresh","silence"],list:{title:"Alert Rules",showAddAlertBtn:!1},edit:{warningMessage:"Some fields may not be editable for system provisioned alerts.",editableFields:["severity"]},alerts_warning_message:"No System alert rules configured"},i=e=>{var t;switch(s().toLower((null===e||void 0===e||null===(t=e.context)||void 0===t?void 0:t.alertType)||"custom")){case"system":return n;case"custom":return a;default:throw new Error("invalid type")}}},23687:(e,t,l)=>{l.d(t,{A:()=>I});var r=l(53536),s=l.n(r),a=l(65043),n=l(8387),i=l(68903),o=l(53764),c=l(97508),d=l(81e3),u=l(85865),h=l(69392),m=l(43845),A=l(74600),v=l(67254),p=l(77677),x=l(76191),g=l(67407),f=l(78240),y=l(17392),j=l(79226),w=l(8248),b=l(1195),C=l(37538),F=l(73216),S=l(75359),R=l(42518),z=l(28912),H=l(70579);const M=e=>{const t=(0,F.Zp)(),[l,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!0),{payload:h,fetchAlerts:m,alerts:v,configuration:p={}}=e,{preGlobalFilteredRows:x,setGlobalFilter:g,state:f}=h;return(0,H.jsxs)(i.Ay,{container:!0,spacing:2,direction:"row",justifyContent:"space-between",alignItems:"center",sx:{flexWrap:"nowrap"},children:[(0,H.jsx)(i.Ay,{item:!0,display:"flex",children:(()=>{const e=r.get(v,"length")||0,t=(0,C.BS)(v),a=(0,C.eD)(v),i=async()=>{await m(),s(!1),o(!0),d(!0)},h={statusData:t,setSilenceStatus:d,fetchDataHandler:m,toggleFilter:s,removeFilter:l&&i},p={silenceData:a,setAlertStatus:o,fetchDataHandler:m,toggleFilter:s,removeFilter:l&&i},x=(0,C.or)(h),g=(0,C.NK)(p);return(0,H.jsxs)(A.A,{direction:"row",alignItems:"center",spacing:2,padding:"0.5rem",children:[(0,H.jsxs)(u.A,{children:[e," ",e<=1?"rule":"rules"]}),n&&x(),c&&g()]})})()}),(0,H.jsx)(i.Ay,{item:!0,alignItems:"center",display:"flex",children:(()=>{var e;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(z.y4,{preGlobalFilteredRows:x,globalFilter:f.globalFilter,setGlobalFilter:g}),(null===p||void 0===p||null===(e=p.list)||void 0===e?void 0:e.showAddAlertBtn)&&(0,H.jsx)(R.A,{sx:{mx:1},variant:"contained",onClick:e=>t("/alertRules/add"),children:"Add Alert Rule"})]})})()})]})};var k=l(69201),D=l(75074),E=l(60446),N=l.n(E),T=l(8259),G=l.n(T),_=l(70532),P=l(41121);N().extend(G());const B=e=>{const{alerts:t,fetchAlerts:l,configuration:r}=e,R=(0,c.wA)(),z=(0,F.Zp)(),[E,T]=(0,a.useState)(null),[G,B]=(0,a.useState)(N().utc().add(1,"day").toDate()),[I,L]=(0,a.useState)(!1),[Q,W]=(0,a.useState)(!1),U=(e,t)=>{T($(t,e,!0)),B(e)},V=e=>{W((t=>(T($(e,G,!0)),!0)))},X=e=>async()=>{L(!0);try{await(0,o.qS)({id:e})&&(l(),R((0,n.kX)({message:"Alert Rule retired successfully"})))}catch{R((0,n.z3)({message:"Failed to retire alert rule"}))}finally{L(!1),T(null)}},O=e=>async()=>{L(!0);try{await(0,o.O3)({id:e}).then((e=>{l()})),R((0,n.kX)({message:"Alert Rule published successfully"}))}catch{R((0,n.z3)({message:"Failed to publish alert rule"}))}finally{T(null),L(!1)}},q=(e,t,r)=>async()=>{L(!0);try{const s={startDate:N().utc(t).format(),endDate:N().utc(r).format(),alertId:e,manager:(0,P.Ct)("ALERT_MANAGER")};await(0,o.d7)(s),l(),R((0,n.kX)({message:"Alert has been muted successfully"}))}catch{R((0,n.z3)({message:"Failed to mute alert"}))}finally{W(!1),T(null),L(!1)}},Y=e=>async()=>{L(!0);try{await(0,o.Fe)(e),l(),R((0,n.kX)({message:"Alert is now unmuted"}))}catch{R((0,n.z3)({message:"Failed to unmute alert"}))}finally{W(!1),L(!1),T(null)}},$=(e,t,l)=>({action:q(e,N().utc().toDate(),t),handleClose:()=>{T(null)},context:{show:l,title:"Silence Alert for:",component:(0,H.jsx)(C.G_,{alertId:e,customSilence:l,endDate:t,handleEndDateChange:U,addSilenceHandler:q,toggleCustomSilence:V})}}),Z=e=>({action:Y(e),handleClose:()=>{T(null)},context:(0,C.hQ)({action:"unmute",title:"alert"})}),K=e=>({action:O(e),handleClose:()=>{T(null)},context:(0,C.hQ)({action:"Publish",title:"rule"})}),J=e=>({action:X(e),handleClose:()=>{T(null)},context:(0,C.hQ)({action:"Retire",title:"rule"})}),ee=t,te=[{Header:"Health",accessor:"state",disableFilters:!0,Cell:e=>{var t,l;const r=(null===e||void 0===e||null===(t=e.cell)||void 0===t||null===(l=t.row)||void 0===l?void 0:l.original)||{};return(0,H.jsx)(d.A,{children:(0,H.jsx)(i.Ay,{children:(0,C.nh)(r)})})}},{Header:"Name",accessor:"name",disableFilters:!0,Cell:e=>{var t,l;const r=(null===e||void 0===e||null===(t=e.cell)||void 0===t||null===(l=t.row)||void 0===l?void 0:l.original)||{},{category:a,severity:n,status:o}=r,c=[{name:"category",label:a.toUpperCase(),tooltip:"Alert Category",color:"primary"},{name:"severity",label:n.toUpperCase(),tooltip:"Severity of Alert",color:"info"}];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(d.A,{minWidth:"13.5rem",children:(0,H.jsx)(d.A,{display:"flex",alignItems:"center",children:(0,H.jsx)(u.A,{align:"left",variant:"subtitle1",children:s().get(r,"name")})})}),(0,H.jsx)(d.A,{minWidth:"13.5rem",children:(0,H.jsx)(d.A,{display:"flex",alignItems:"center",marginTop:"0.5rem",children:s().map(c,(e=>(0,H.jsx)(i.Ay,{marginRight:"0.5rem",children:(0,H.jsx)(h.A,{title:e.tooltip,children:(0,H.jsx)(m.A,{label:e.label,color:e.color,size:"small",variant:"combined"})})},Math.random())))})})]})}},{Header:"Status",accessor:"status",disableFilters:!0,Cell:e=>{var t,l;const r=(null===e||void 0===e||null===(t=e.cell)||void 0===t||null===(l=t.row)||void 0===l?void 0:l.original)||{},{status:s}=r;return(0,H.jsx)(d.A,{minWidth:"7.5rem",children:(0,H.jsx)(m.A,{size:"small",variant:"filled",color:(0,C.wm)(s),label:s.toUpperCase()})})}},{Header:"Time Stamp",accessor:"updatedAt",disableFilters:!0,Cell:e=>{var t,l;const r=(null===e||void 0===e||null===(t=e.cell)||void 0===t||null===(l=t.row)||void 0===l?void 0:l.original)||{},s=N()(null===r||void 0===r?void 0:r.updatedAt).fromNow();return(0,H.jsx)(h.A,{title:(0,C.Q$)(null===r||void 0===r?void 0:r.updatedAt),placement:"bottom-start",children:(0,H.jsx)(d.A,{minWidth:"10rem",children:s})})}},{Header:"Actions",accessor:"actions",disableFilters:!0,Cell:e=>{var t,l;const a=(null===e||void 0===e||null===(t=e.cell)||void 0===t||null===(l=t.row)||void 0===l?void 0:l.original)||{},{id:n}=a;let o,c;const d=s().get(a,"silenceState");o="muted"===(null===d||void 0===d?void 0:d.state),c=null===d||void 0===d?void 0:d.silenceId;const u=[{id:"silence-button",name:"silence",label:o?"Unsilence":"Silence",color:"primary",onclick:()=>{o?(e=>{T(Z(e))})(c):(e=>{T($(e,G,Q))})(n)},icon:o?(0,H.jsx)(k.A,{}):(0,H.jsx)(D.A,{})},{name:"publish",label:"Publish",color:"primary",onclick:()=>(e=>{T(K(e))})(n),icon:(0,H.jsx)(p.A,{})},{name:"view",label:"View",color:"primary",onclick:e=>z(`/alertRules/view/${n}`),icon:(0,H.jsx)(x.A,{})},{name:"edit",label:"Edit",color:"primary",onclick:e=>z(`/alertRules/edit/${n}`),icon:(0,H.jsx)(g.A,{})},{name:"retire",label:"Retire",color:"error",onclick:()=>(e=>{T(J(e))})(n),icon:(0,H.jsx)(f.A,{})}];return(0,H.jsx)(i.Ay,{children:(0,H.jsx)(A.A,{direction:"row",spacing:1,children:s().map(u,(e=>{var t,l;return null!==r&&void 0!==r&&null!==(t=r.allowedActions)&&void 0!==t&&t.includes(null===e||void 0===e?void 0:e.name)?(0,H.jsx)(i.Ay,{children:(0,H.jsx)(h.A,{title:e.name,children:(0,H.jsx)(y.A,{id:e.id,onClick:e.onclick,color:e.color,size:"large",disabled:(l=null===e||void 0===e?void 0:e.name,"publish"===l?"live"===(null===a||void 0===a?void 0:a.status):"retire"===l?"retired"===(null===a||void 0===a?void 0:a.status):"silence"===l&&"live"!==(null===a||void 0===a?void 0:a.status)),children:e.icon})})},"action-"+Math.random()):null}))})})}}],le=e=>(0,H.jsx)(d.A,{sx:{p:2,pb:0},textAlign:"end",children:(0,H.jsx)(i.Ay,{item:!0,xs:12,children:(0,H.jsx)(M,{fetchAlerts:l,configuration:r,payload:e,alerts:ee})})});return(0,H.jsx)(i.Ay,{children:(0,H.jsx)(j.A,{content:!1,boxShadow:!0,children:I?(0,_.Y)({config:{type:"table",width:"100%",totallines:6}}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(w.A,{children:(0,H.jsx)(S.A,{renderHeader:le,columns:te,data:ee})}),E?(0,H.jsx)(b.A,{...E,open:!0}):null,!s().size(t)&&(0,H.jsx)(v.A,{severity:"error",children:(0,H.jsx)(u.A,{variant:"body1",children:s().get(r,"alerts_warning_message")})})]})})})},I=e=>{const{configuration:t}=e,l=(0,c.wA)(),[s,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),m=async e=>{try{const l=t.searchQuery,s=await(0,o.XH)({config:l}),{alerts:a}=s,n=r.filter(a,e);d(n)}catch{l((0,n.z3)({message:"Something went wrong"}))}finally{h(!1)}};(0,a.useEffect)((()=>{h(!0),m()}),[]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(i.Ay,{container:!0,spacing:3,children:u?(0,H.jsx)(i.Ay,{item:!0,xs:12,children:(0,H.jsx)(j.A,{content:!1,children:(0,_.Y)({config:{type:"table",loader:!1,width:"100%",totallines:6}})})}):(0,H.jsx)(i.Ay,{item:!0,xs:12,children:(0,H.jsx)(B,{alerts:s,fetchAlerts:m,configuration:t})})})})}},78240:(e,t,l)=>{l.d(t,{A:()=>o});var r=l(89379),s=l(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};var n=l(8436),i=function(e,t){return s.createElement(n.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:a}))};const o=s.forwardRef(i)},67407:(e,t,l)=>{l.d(t,{A:()=>o});var r=l(89379),s=l(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var n=l(8436),i=function(e,t){return s.createElement(n.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:a}))};const o=s.forwardRef(i)},76191:(e,t,l)=>{l.d(t,{A:()=>o});var r=l(89379),s=l(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var n=l(8436),i=function(e,t){return s.createElement(n.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:a}))};const o=s.forwardRef(i)},77677:(e,t,l)=>{l.d(t,{A:()=>o});var r=l(89379),s=l(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};var n=l(8436),i=function(e,t){return s.createElement(n.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:a}))};const o=s.forwardRef(i)},75074:(e,t,l)=>{l.d(t,{A:()=>a});var r=l(66734),s=l(70579);const a=(0,r.A)((0,s.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5zM7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42"}),"NotificationsActiveOutlined")},69201:(e,t,l)=>{l.d(t,{A:()=>a});var r=l(66734),s=l(70579);const a=(0,r.A)((0,s.jsx)("path",{d:"M20 18.69 7.84 6.14 5.27 3.49 4 4.76l2.8 2.8v.01c-.52.99-.8 2.16-.8 3.42v5l-2 2v1h13.73l2 2L21 19.72zM12 22c1.11 0 2-.89 2-2h-4c0 1.11.89 2 2 2m6-7.32V11c0-3.08-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68c-.15.03-.29.08-.42.12-.1.03-.2.07-.3.11h-.01c-.01 0-.01 0-.02.01-.23.09-.46.2-.68.31 0 0-.01 0-.01.01z"}),"NotificationsOff")},98533:(e,t,l)=>{l.d(t,{A:()=>g});var r=l(98587),s=l(58168),a=l(65043),n=l(58387),i=l(65049),o=l(34535),c=l(61475),d=l(98206),u=l(85865),h=l(14987),m=l(60239);function A(e){return(0,m.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var v=l(70579);const p=["children","className"],x=(0,o.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),g=a.forwardRef((function(e,t){const l=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:a}=l,o=(0,r.A)(l,p),c=(e=>{const{classes:t}=e,l=(0,i.A)({root:["root"]},A,t);return(0,s.A)({},t,l)})(o);return(0,v.jsx)(x,(0,s.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:o,className:(0,n.A)(c.root,a)},l,{classes:c}))}))}}]);
//# sourceMappingURL=264.65ecb95a.chunk.js.map