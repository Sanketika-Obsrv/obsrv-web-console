{"version":3,"file":"static/js/669.1e338304.chunk.js","mappings":"yRAQA,SAASA,EAAuBC,GAAmC,IAAlC,MAAEC,EAAK,MAAEC,KAAUC,GAAYH,EAC5D,OACII,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEC,QAAS,OAAQC,WAAY,SAAUC,SAAU,SAAWC,SAAA,EACnEC,EAAAA,EAAAA,KAACN,EAAAA,EAAG,CAACC,GAAI,CAAEM,MAAO,QAASC,GAAI,EAAGC,MAAOZ,EAAMa,QAAQC,QAAQ,MAAQN,UACnEC,EAAAA,EAAAA,KAACM,EAAAA,EAAc,CAACC,QAAQ,cAAcJ,MAAM,aAAcX,OAE9DQ,EAAAA,EAAAA,KAACN,EAAAA,EAAG,CAACC,GAAI,CAAEa,SAAU,IAAKT,UACtBC,EAAAA,EAAAA,KAACS,EAAAA,EAAU,CAACF,QAAQ,KAAKJ,MAAM,iBAAgBJ,SAAE,GAAGW,KAAKC,MACrDrB,YAKpB,CAEO,SAASsB,EAAgBC,EAA2BC,GACvD,MAAoB,kBAATD,EACA,CACHE,IAAKD,EAAQ,GAAGD,KAAQC,IAAUD,EAClCG,QAASH,GAIV,CACHE,IAAKD,EAAQ,GAAGD,EAAKI,QAAQH,IAAUD,EAAKI,KAC5CA,KAAMJ,EAAKI,KACXC,KAAML,EAAKK,KACXC,KAAMN,EAAKM,KACXC,KAAMP,EAAKO,KACXJ,QAASH,EAAKG,QACdK,aAAcR,EAAKQ,aACnBC,iBAAkBT,EAAKS,iBAE/B,CAEe,SAASC,EAAYC,GAAiE,IAAhE,SAAEC,GAAW,EAAK,MAAEC,EAAK,SAAEC,EAAQ,KAAEP,GAAwBI,EAC9F,MAAMjC,GAAQqC,EAAAA,EAAAA,KACRC,EAAUH,EAAMI,OAAS,EAG/B,OACI9B,EAAAA,EAAAA,KAAC+B,EAAAA,EAAI,CACDC,gBAAc,EACdrC,GAAI,IACIkC,GAAWT,IAASa,EAAAA,EAAYC,UAAY,CAAEC,GAAI,MAClDf,IAASa,EAAAA,EAAYC,UAAY,CAAEjC,MAAO,sBAChDF,SAED2B,EAAMU,KAAI,CAACvB,EAAMC,KACd,MAAM,IAAEC,EAAG,KAAEE,EAAI,KAAEC,EAAI,QAAEF,EAAO,KAAEI,GAASR,EAAgBC,EAAMC,GAEjE,OACIrB,EAAAA,EAAAA,MAAC4C,EAAAA,GAAQ,CAEL1C,GAAI,CACAwC,GAAI,EACJG,GAAI,EACJC,GAAI,IACJC,aAAc,IACdC,OAASlD,GAAU,aAAaA,EAAMa,QAAQsC,UAC9C7C,WAAY,UACdE,SAAA,EAEFC,EAAAA,EAAAA,KAAC2C,EAAAA,EAAgB,CAACC,MAAO,CAAE3C,MAAO,OAAQ4C,SAAU,UAAWC,YAAa,MAE5E9C,EAAAA,EAAAA,KAAC+C,EAAAA,EAAY,CACT1C,SAASL,EAAAA,EAAAA,KAACS,EAAAA,EAAU,CAACuC,aAAa,WAAWC,SAAS,SAAS1C,QAAQ,QAAOR,SAAkB,kBAATc,EAAoBA,EAAOI,IAClHiC,uBAAwB,CAAE3C,QAAS,aACnC4C,yBAA0B,CAAE5C,QAAS,WACrCZ,GAAI,CAAEO,GAAI,EAAGJ,SAAU,IAAKmD,SAAU,SAAUG,WAAY,SAAUJ,aAAc,eAGxFhD,EAAAA,EAAAA,KAACZ,EAAuB,CAACE,MAAO,IAAKC,MAAOA,IAE3CoC,IACG3B,EAAAA,EAAAA,KAACqD,EAAAA,EAAU,CACP,eAAc,GAAGC,EAAAA,sBAAkCvC,IACnDG,KAAK,QACLf,MAAM,QACNoD,MAAM,UACNC,QAASA,IAAM7B,EAASd,GACxBlB,GAAI,CAAE8D,GAAI,QACVC,KAAK,MAAK3D,UAEVC,EAAAA,EAAAA,KAAC2D,EAAAA,EAAc,CAACf,MAAO,CAAEC,SAAU,cA/BtC9B,EAkCE,KAK/B,C,oHCvFO,MAAM6C,EAAa1C,GAAiBR,KAAKmD,KAAK3C,EAAOR,KAAKoD,IAAI,KAAM,IAE9DC,EAA4B,CACrC,iBAAkB,2CAGP,SAASC,EAAc3E,GAA6B,IAA5B,eAAE4E,GAAuB5E,EAC5D,OACIW,EAAAA,EAAAA,KAACkE,EAAAA,EAAK,CACF3D,QAAQ,WACRZ,GAAI,CACA4C,GAAI,EACJD,GAAI,EACJ6B,GAAI,EACJC,YAAa,cACbC,QAAU9E,IAAU+E,EAAAA,EAAAA,IAAM/E,EAAMa,QAAQmE,MAAMC,KAAM,MACtDzE,SAEDkE,EAAe7B,KAAIZ,IAAuB,IAAtB,KAAEX,EAAI,OAAE4D,GAAQjD,EACjC,MAAM,KAAEL,EAAI,KAAED,IAASN,EAAAA,EAAAA,GAAgBC,GAEvC,OACIpB,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAYC,GAAI,CAAEwC,GAAI,GAAIpC,SAAA,EAC1BN,EAAAA,EAAAA,MAACgB,EAAAA,EAAU,CAACF,QAAQ,YAAYmE,QAAM,EAAA3E,SAAA,CACjCoB,EAAMD,EAAO,MAAM0C,EAAU1C,OAAY,MAG7CuD,EAAOrC,KAAKmC,IACT,MAAMI,EAAUC,EAAAA,IAAMb,EAAsBQ,EAAMM,OAASN,EAAMI,QACjE,OACI3E,EAAAA,EAAAA,KAACN,EAAAA,EAAG,CAAkBoF,UAAU,KAAKnF,GAAI,CAAEoF,WAAY,WAAYhF,SAC9D4E,GADKJ,EAAMM,KAEV,MAVR1D,EAaJ,KAK1B,C,wECnDA,QAD2B,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,4hBAAgiB,KAAQ,kBAAmB,MAAS,U,cCKluB6D,EAAuB,SAA8BxF,EAAOyF,GAC9D,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAG5F,GAAQ,CAAC,EAAG,CAC5FyF,IAAKA,EACLI,KAAMC,IAEV,EAKA,QAJ2BJ,EAAAA,WAAiBF,G,+PCS5C,MAwJA,EAxJ4BO,KACxB,MAAMC,GAAWC,EAAAA,EAAAA,KAAaC,IAAU,IAAAC,EAAAC,EAAA,OAAU,OAALF,QAAK,IAALA,GAAc,QAATC,EAALD,EAAOG,eAAO,IAAAF,GAAM,QAANC,EAAdD,EAAgBG,YAAI,IAAAF,OAAf,EAALA,EAAsBE,IAAI,KAChEA,EAAMC,IAAWC,EAAAA,EAAAA,aACjBtE,EAAOuE,IAAYD,EAAAA,EAAAA,aACnBE,EAASC,IAAcH,EAAAA,EAAAA,WAAS,GACjCI,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MACRC,EAAYC,IAAiBT,EAAAA,EAAAA,UAAc,OAC5C,UAAEU,GAAcJ,GACfK,EAAaC,IAAkBZ,EAAAA,EAAAA,UAAiB,GAAGU,MAE1DG,EAAAA,EAAAA,YAAU,KACNT,GAASU,EAAAA,EAAAA,GAAmB,CAAEhB,KAAM,CAAEiB,QAAS,CAAEC,OAAQ,CAACC,EAAAA,GAAcC,KAAMD,EAAAA,GAAcE,aAAgB,GAC7G,KAEHN,EAAAA,EAAAA,YAAU,KACFrB,GACAZ,EAAAA,QAAUY,GAAU4B,IACZxC,EAAAA,IAAMwC,EAAS,eAAiBV,GAAWE,EAAehC,EAAAA,IAAMwC,EAAS,SAAWV,EAAU,GAE1G,GACD,CAAClB,IAEJ,MAAM6B,EAAiBC,UACnB,IACInB,GAAW,GACX,MAAMoB,QAAiBC,EAAAA,EAAAA,IAAWd,EAAWU,GAC7C,GAAa,OAARG,QAAQ,IAARA,IAAAA,EAAUzB,KAAM,MAAM,IAAI2B,MAAM,IACrCrB,GAASsB,EAAAA,EAAAA,IAAQ,CAAE/C,QAAS,gCAChC,CAAE,MAAOgD,GACLvB,GAAS7B,EAAAA,EAAAA,IAAM,CAAEI,QAAS,kDAC9B,CAAC,QACGiD,IACAzB,GAAW,EACf,GAyBE0B,EAAaP,UACf,MAAMQ,EAAwBlD,EAAAA,KAAOY,GAAWK,IAAwB,OAAPA,QAAO,IAAPA,OAAO,EAAPA,EAASkC,cAAerB,IAEzF,IAAKoB,EAED,YADA1B,GAAS7B,EAAAA,EAAAA,IAAM,CAAEI,QAAS,qBAI9B,MAAMqD,EAAqBpD,EAAAA,IAAMkD,EAAuB,CAAC,oBAAqB,oBAAsB,KAC9FG,EAAoBrD,EAAAA,IAAMkD,EAAuB,CAAC,oBAAqB,cAAgB,KAC7F,IAAIV,EAAe,CAAC,EAEpB,GAAIY,EAAoB,CACpB,MAAME,EAAYC,MAAMC,QAAQtC,GAAQA,EAAO,CAACA,GAChDsB,EAAU,CAAEtB,KAAM,CAAE,CAACmC,IAAoBI,EAAAA,EAAAA,KAAM,CAACL,GAAqBE,IACrEb,EAAeD,EACnB,MACQe,MAAMC,QAAQtC,IACdsB,EAAUxC,EAAAA,IAAMkB,GAAMwC,IAAK,CAAOxC,KAAM,CAAEyC,IAAIF,EAAAA,EAAAA,KAAMC,kBAxC/BhB,WAC7B,IACInB,GAAW,GACX,MAAMqC,EAAkB5D,EAAAA,MAAQA,EAAAA,IAAM6D,GAAUrB,IAAWI,EAAAA,EAAAA,IAAWd,EAAWU,KAAW,GACtFG,QAAiBmB,QAAQC,WAAW/D,EAAAA,QAAU4D,IACpD,IAAII,EAAa,EACbC,EAAe,EACnB,IAAK,MAAMzB,KAAWxC,EAAAA,QAAU2C,GACL,cAAnBH,EAAQJ,OAAwB6B,IAC/BD,IAEmCxC,EAAvB,IAAjByC,GAAqC,IAAfD,GAA2BE,EAAAA,EAAAA,IAAQ,CAAEnE,QAAS,uBAAuBkE,4BAAuCD,aAC5G,IAAjBC,GAA6BtE,EAAAA,EAAAA,IAAM,CAAEI,QAAS,2BACzC+C,EAAAA,EAAAA,IAAQ,CAAE/C,QAAS,gCACrC,CAAE,MAAOgD,GACLvB,GAAS7B,EAAAA,EAAAA,IAAM,CAAEI,QAAS,kDAC9B,CAAC,QACGiD,IACAzB,GAAW,EACf,GAsBc4C,CAAyB3B,KAE/BA,EAAU,CAAEtB,KAAM,CAAEyC,IAAIF,EAAAA,EAAAA,KAAMC,MAAOxC,IACrCuB,EAAeD,GAEvB,EAsBEQ,EAAcA,KAChB3B,EAAS,MACTF,EAAQ,KAAK,EAGjB,OAAOtG,EAAAA,EAAAA,MAAAuJ,EAAAA,SAAA,CAAAjJ,SAAA,CACFmG,IAAWlG,EAAAA,EAAAA,KAACiJ,EAAAA,EAAM,KACnBjJ,EAAAA,EAAAA,KAACkJ,EAAAA,EAAQ,CAACC,MAAO,0BAA0BvE,EAAAA,WAAa+B,MAAgB5G,UACpEN,EAAAA,EAAAA,MAAC2J,EAAAA,GAAI,CAACC,WAAS,EAACC,QAAS,EAAEvJ,SAAA,EACvBC,EAAAA,EAAAA,KAACoJ,EAAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAG1J,UACtBC,EAAAA,EAAAA,KAAC0J,EAAAA,EAAK,CAACvJ,MAAM,OAAOkF,MAAMrF,EAAAA,EAAAA,KAACgF,EAAoB,IAAIjF,SAAC,2FAIxDC,EAAAA,EAAAA,KAACoJ,EAAAA,GAAI,CAACG,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAG1J,UACtBC,EAAAA,EAAAA,KAAC2J,EAAAA,EAAW,CAAC7D,KAAMA,EAAMC,QAASA,EAASrE,MAAOA,EAAOuE,SAAUA,EAAU2D,gBAAiBnD,WAIzG/E,GAASkD,EAAAA,KAAOlD,GAAS,IACtBjC,EAAAA,EAAAA,MAACoK,EAAAA,EAAW,CAACC,UAAW,EAAE/J,SAAA,EACtBN,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACE,QAAQ,OAAOmK,eAAe,gBAAehK,SAAA,EAC9CC,EAAAA,EAAAA,KAACS,EAAAA,EAAU,CAACF,QAAQ,KAAKyJ,cAAY,EAAAjK,SAAC,oBACtCC,EAAAA,EAAAA,KAACiK,EAAAA,EAAM,CAACzG,QAASoE,EAAY7H,SAAC,mBAElCC,EAAAA,EAAAA,KAACuB,EAAAA,EAAY,CAACG,MAAOA,EAAOD,UAAU,EAAOE,SAvCpC2F,UACjB,MAAM4C,EAAgBxI,GAASA,EAAMyI,QAAQC,GAAeA,IAAUvJ,IAChEwJ,QAAiB3B,QAAQ4B,IAAIJ,EAAc9H,KAAKvB,IAAe0J,EAAAA,EAAAA,IAAqB1J,MACpF2J,GAReC,EAQqBJ,EAPpBzF,EAAAA,OAASA,EAAAA,YAAc6F,IAAWC,IAAgB9F,EAAAA,QAAU8F,MAD7DD,MASa,IAA9B7F,EAAAA,KAAO4F,IACPvE,EAASiE,GACTnE,EAAQyE,GACH5F,EAAAA,QAAUsF,IAAgB9D,GAAS7B,EAAAA,EAAAA,IAAM,CAAEI,QAAS,6BAEzDsB,EAASiE,GACTnE,EAAQyE,GACZ,QA+BW,OAAVhE,QAAU,IAAVA,OAAU,EAAVA,EAAY1E,QAAS,IAAK9B,EAAAA,EAAAA,KAACgE,EAAAA,GAAc,CAACC,eAAgBuC,KAC3DxG,EAAAA,EAAAA,KAACN,EAAAA,EAAG,CAACE,QAAQ,OAAOmK,eAAe,WAAUhK,UACzCC,EAAAA,EAAAA,KAAC2K,EAAAA,EAAa,CAAA5K,UACVC,EAAAA,EAAAA,KAACiK,EAAAA,EAAM,CACH,eAAc,GAAG3G,EAAAA,gBAA4BgD,EAAOK,cACpD,gBAAeL,EAAOI,UACtB,kBAAgB,UAChBkE,WAAUhG,EAAAA,QAAUkB,IAAeI,EACnC3F,QAAQ,YACRZ,GAAI,CAAEwC,GAAI,EAAGsB,GAAI,GACjBD,QAAUqH,GAAWhD,IAAa9H,SACrC,sBAKV,C,6DCxKP,QADqB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,0VAA8V,KAAQ,SAAU,MAAS,Y,cCKjhB4D,EAAiB,SAAwBnE,EAAOyF,GAClD,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAG5F,GAAQ,CAAC,EAAG,CAC5FyF,IAAKA,EACLI,KAAMyF,IAEV,EAKA,QAJ2B5F,EAAAA,WAAiBvB,E","sources":["components/third-party/dropzone/FilesPreview.tsx","components/third-party/dropzone/RejectionFiles.tsx","../node_modules/@ant-design/icons-svg/es/asn/QuestionCircleFilled.js","../node_modules/@ant-design/icons/es/icons/QuestionCircleFilled.js","pages/dashboard/createEvents.tsx","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js"],"sourcesContent":["import { useTheme } from '@mui/material/styles';\nimport { Box, List, ListItemText, ListItem, Typography, LinearProgress, LinearProgressProps } from '@mui/material';\nimport IconButton from 'components/@extended/IconButton';\nimport { DropzopType, FilePreviewProps } from 'types/dropzone';\nimport { DeleteOutlined, FileTextOutlined } from '@ant-design/icons';\nimport { CustomFile } from 'types/dropzone';\nimport interactIds  from 'data/telemetry/interact.json';\n\nfunction LinearProgressWithLabel({ value, theme, ...props }: any) {\n    return (\n        <Box sx={{ display: 'flex', alignItems: 'center', maxWidth: '22rem', }}>\n            <Box sx={{ width: '20rem', mr: 1, color: theme.palette.primary[400], }}>\n                <LinearProgress variant=\"determinate\" color=\"inherit\" {...props} />\n            </Box>\n            <Box sx={{ minWidth: 35 }}>\n                <Typography variant=\"h6\" color=\"text.secondary\">{`${Math.round(\n                    value,\n                )}%`}</Typography>\n            </Box>\n        </Box>\n    );\n}\n\nexport function getDropzoneData(file: CustomFile | string, index?: number) {\n    if (typeof file === 'string') {\n        return {\n            key: index ? `${file}-${index}` : file,\n            preview: file\n        };\n    }\n\n    return {\n        key: index ? `${file.name}-${index}` : file.name,\n        name: file.name,\n        size: file.size,\n        path: file.path,\n        type: file.type,\n        preview: file.preview,\n        lastModified: file.lastModified,\n        lastModifiedDate: file.lastModifiedDate\n    };\n}\n\nexport default function FilesPreview({ showList = false, files, onRemove, type }: FilePreviewProps) {\n    const theme = useTheme();\n    const hasFile = files.length > 0;\n    const layoutType = type;\n\n    return (\n        <List\n            disablePadding\n            sx={{\n                ...(hasFile && type !== DropzopType.standard && { my: 3 }),\n                ...(type === DropzopType.standard && { width: 'calc(100% - 84px)' })\n            }}\n        >\n            {files.map((file, index) => {\n                const { key, name, size, preview, type } = getDropzoneData(file, index);\n\n                return (\n                    <ListItem\n                        key={key}\n                        sx={{\n                            my: 1,\n                            px: 2,\n                            py: 0.75,\n                            borderRadius: 0.75,\n                            border: (theme) => `solid 1px ${theme.palette.divider}`,\n                            alignItems: 'center',\n                        }}\n                    >\n                        <FileTextOutlined style={{ width: '30px', fontSize: '1.15rem', marginRight: 4 }} />\n\n                        <ListItemText\n                            primary={<Typography textOverflow=\"ellipsis\" overflow=\"hidden\" variant=\"body1\">{typeof file === 'string' ? file : name}</Typography>}\n                            primaryTypographyProps={{ variant: 'subtitle2' }}\n                            secondaryTypographyProps={{ variant: 'caption' }}\n                            sx={{ mr: 2, maxWidth: 250, overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis' }}\n                        />\n\n                        <LinearProgressWithLabel value={100} theme={theme} />\n\n                        {onRemove && (\n                            <IconButton\n                                data-edataid={`${interactIds.file_remove_single}:${key}`}\n                                size=\"small\"\n                                color=\"error\"\n                                shape=\"rounded\"\n                                onClick={() => onRemove(file)}\n                                sx={{ ml: 'auto' }}\n                                edge=\"end\"\n                            >\n                                <DeleteOutlined style={{ fontSize: '1rem' }} />\n                            </IconButton>\n                        )}\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n}\n","// material-ui\nimport { alpha } from '@mui/material/styles';\nimport { Box, Paper, Typography } from '@mui/material';\n\n// third-party\nimport { FileRejection } from 'react-dropzone';\nimport { getDropzoneData } from './FilesPreview';\nimport * as _ from \"lodash\";\n\ntype Props = {\n    fileRejections: FileRejection[];\n};\n\nexport const bytesToMb = (size: number) => Math.ceil(size / Math.pow(1024, 2));\n\nexport const dropzoneErrorMapping: any = {\n    \"file-too-large\": \"File is larger than allowed size of 5mb\",\n}\n\nexport default function RejectionFiles({ fileRejections }: Props) {\n    return (\n        <Paper\n            variant=\"outlined\"\n            sx={{\n                py: 1,\n                px: 2,\n                mt: 1,\n                borderColor: 'error.light',\n                bgcolor: (theme) => alpha(theme.palette.error.main, 0.08)\n            }}\n        >\n            {fileRejections.map(({ file, errors }) => {\n                const { path, size } = getDropzoneData(file);\n\n                return (\n                    <Box key={path} sx={{ my: 1 }}>\n                        <Typography variant=\"subtitle2\" noWrap>\n                            {path}{size ? ` - ${bytesToMb(size)}mb` : ''}\n                        </Typography>\n\n                        {errors.map((error) => {\n                            const message = _.get(dropzoneErrorMapping, error.code) || error.message;\n                            return (\n                                <Box key={error.code} component=\"li\" sx={{ typography: 'caption' }}>\n                                    {message}\n                                </Box>\n                            )\n                        })}\n                    </Box>\n                );\n            })}\n        </Paper>\n    );\n}\n","// This icon file is generated automatically.\nvar QuestionCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z\" } }] }, \"name\": \"question-circle\", \"theme\": \"filled\" };\nexport default QuestionCircleFilled;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport QuestionCircleFilledSvg from \"@ant-design/icons-svg/es/asn/QuestionCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\nvar QuestionCircleFilled = function QuestionCircleFilled(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: QuestionCircleFilledSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(QuestionCircleFilled);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'QuestionCircleFilled';\n}\nexport default RefIcon;","import { QuestionCircleFilled } from '@ant-design/icons';\nimport { Alert, Grid, Button, Box, Typography, } from '@mui/material';\nimport MainCard from 'components/MainCard';\nimport interactIds from 'data/telemetry/interact.json';\nimport UploadFiles from 'pages/dataset/wizard/UploadFiles';\nimport { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router';\nimport { sendEvents } from 'services/dataset';\nimport { error, success, warning } from 'services/toaster';\nimport { v4 } from \"uuid\";\nimport * as _ from \"lodash\";\nimport { GenericCard } from 'components/styled/Cards';\nimport FilesPreview from 'components/third-party/dropzone/FilesPreview';\nimport { readJsonFileContents } from 'services/utils';\nimport AnimateButton from 'components/@extended/AnimateButton';\nimport RejectionFiles from 'components/third-party/dropzone/RejectionFiles';\nimport { fetchDatasetsThunk } from 'store/middlewares';\nimport Loader from 'components/Loader';\nimport { DatasetStatus } from 'types/datasets';\n\nconst DatasetCreateEvents = () => {\n    const datasets = useSelector((state: any) => state?.dataset?.data?.data);\n    const [data, setData] = useState<any>();\n    const [files, setFiles] = useState<any>();\n    const [loading, setLoading] = useState(false)\n    const dispatch = useDispatch();\n    const params = useParams();\n    const [formErrors, setFormErrors] = useState<any>(null);\n    const { datasetId } = params;\n    const [datasetName, setDatasetName] = useState<string>(`${datasetId}`)\n\n    useEffect(() => {\n        dispatch(fetchDatasetsThunk({ data: { filters: { status: [DatasetStatus.Live, DatasetStatus.Retired] } } }));\n    }, []);\n\n    useEffect(() => {\n        if (datasets) {\n            _.forEach(datasets, payload => {\n                if (_.get(payload, \"dataset_id\") == datasetId) setDatasetName(_.get(payload, \"name\") || datasetId)\n            })\n        }\n    }, [datasets])\n\n    const dispatchEvents = async (payload: any) => {\n        try {\n            setLoading(true);\n            const response = await sendEvents(datasetId, payload);\n            if (!response?.data) throw new Error('');\n            dispatch(success({ message: 'Events pushed successfully.' }));\n        } catch (err) {\n            dispatch(error({ message: 'Failed to push events. Please try again later' }))\n        } finally {\n            onRemoveAll();\n            setLoading(false);\n        }\n    }\n\n    const dispatchEventsInParallel = async (payloads: any) => {\n        try {\n            setLoading(true);\n            const payloadPromises = _.chunk(_.map(payloads, payload => sendEvents(datasetId, payload)), 6)\n            const response = await Promise.allSettled(_.flatten(payloadPromises));\n            let errorCount = 0;\n            let successCount = 0;\n            for (const payload of _.flatten(response)) {\n                if (payload.status === \"fulfilled\") successCount++;\n                else errorCount++;\n            }\n            if (successCount !== 0 && errorCount !== 0) dispatch(warning({ message: `Successfully pushed ${successCount} events. Failed to push ${errorCount} events` }));\n            else if (successCount === 0) dispatch(error({ message: 'Failed to push events' }));\n            else dispatch(success({ message: 'Events pushed successfully.' }));\n        } catch (err) {\n            dispatch(error({ message: 'Failed to push events. Please try again later' }))\n        } finally {\n            onRemoveAll();\n            setLoading(false);\n        }\n    }\n\n    const pushEvents = async () => {\n        const datasetConfigurations = _.find(datasets, (dataset: any) => dataset?.dataset_id === datasetId);\n\n        if (!datasetConfigurations) {\n            dispatch(error({ message: 'Invalid Dataset' }));\n            return\n        }\n\n        const configuredBatchKey = _.get(datasetConfigurations, ['extraction_config', 'extraction_key']) || null;\n        const configuredBatchId = _.get(datasetConfigurations, ['extraction_config', 'batch_id']) || 'id';\n        let payload: any = {};\n\n        if (configuredBatchKey) {\n            const batchData = Array.isArray(data) ? data : [data];\n            payload = { data: { [configuredBatchId]: v4(), [configuredBatchKey]: batchData } };\n            dispatchEvents(payload);\n        } else {\n            if (Array.isArray(data)) {\n                payload = _.map(data, event => ({ data: { id: v4(), event } }));\n                await dispatchEventsInParallel(payload);\n            } else {\n                payload = { data: { id: v4(), event: data } };\n                dispatchEvents(payload)\n            }\n        }\n    }\n\n    const flattenContents = (content: Record<string, any> | any) => {\n        const flattenedData = _.filter(_.flattenDeep(content), (field: any) => !_.isEmpty(field));\n        return flattenedData;\n    }\n\n    const onFileRemove = async (file: File | string) => {\n        const filteredItems = files && files.filter((_file: any) => _file !== file);\n        const contents = await Promise.all(filteredItems.map((file: File) => readJsonFileContents(file)));\n        const flattenedContents = flattenContents(contents);\n        if (_.size(flattenedContents) === 0) {\n            setFiles(filteredItems);\n            setData(flattenedContents);\n            if (!_.isEmpty(filteredItems)) dispatch(error({ message: 'Invalid file contents' }));\n        } else {\n            setFiles(filteredItems);\n            setData(flattenedContents);\n        }\n    };\n\n    const onRemoveAll = () => {\n        setFiles(null);\n        setData(null);\n    };\n\n    return <>\n        {loading && <Loader />}\n        <MainCard title={`Add Events to Dataset (${_.capitalize(datasetName)})`}>\n            <Grid container spacing={1}>\n                <Grid item xs={12} sm={12}>\n                    <Alert color=\"info\" icon={<QuestionCircleFilled />}>\n                        Submit your events to the Datasource by uploading a JSON file or editing JSON data.\n                    </Alert>\n                </Grid>\n                <Grid item xs={12} sm={12}>\n                    <UploadFiles data={data} setData={setData} files={files} setFiles={setFiles} subscribeErrors={setFormErrors} />\n                </Grid>\n            </Grid>\n        </MainCard >\n        {files && _.size(files) > 0 &&\n            <GenericCard elevation={1}>\n                <Box display=\"flex\" justifyContent=\"space-between\">\n                    <Typography variant=\"h5\" gutterBottom>Files Uploaded</Typography>\n                    <Button onClick={onRemoveAll}>Remove all</Button>\n                </Box>\n                <FilesPreview files={files} showList={false} onRemove={onFileRemove} />\n            </GenericCard>\n        }\n        {formErrors?.length > 0 && <RejectionFiles fileRejections={formErrors} />}\n        <Box display=\"flex\" justifyContent=\"flex-end\">\n            <AnimateButton>\n                <Button\n                    data-edataid={`${interactIds.create_events}${params.datasetName}`}\n                    data-objectid={params.datasetId}\n                    data-objecttype=\"dataset\"\n                    disabled={_.isEmpty(data) ? true : loading}\n                    variant=\"contained\"\n                    sx={{ my: 2, ml: 1 }}\n                    onClick={(e: any) => pushEvents()}\n                >\n                    Send Events\n                </Button>\n            </AnimateButton>\n        </Box>\n    </>\n};\n\nexport default DatasetCreateEvents;\n","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(DeleteOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'DeleteOutlined';\n}\nexport default RefIcon;"],"names":["LinearProgressWithLabel","_ref","value","theme","props","_jsxs","Box","sx","display","alignItems","maxWidth","children","_jsx","width","mr","color","palette","primary","LinearProgress","variant","minWidth","Typography","Math","round","getDropzoneData","file","index","key","preview","name","size","path","type","lastModified","lastModifiedDate","FilesPreview","_ref2","showList","files","onRemove","useTheme","hasFile","length","List","disablePadding","DropzopType","standard","my","map","ListItem","px","py","borderRadius","border","divider","FileTextOutlined","style","fontSize","marginRight","ListItemText","textOverflow","overflow","primaryTypographyProps","secondaryTypographyProps","whiteSpace","IconButton","interactIds","shape","onClick","ml","edge","DeleteOutlined","bytesToMb","ceil","pow","dropzoneErrorMapping","RejectionFiles","fileRejections","Paper","mt","borderColor","bgcolor","alpha","error","main","errors","noWrap","message","_","code","component","typography","QuestionCircleFilled","ref","React","AntdIcon","_objectSpread","icon","QuestionCircleFilledSvg","DatasetCreateEvents","datasets","useSelector","state","_state$dataset","_state$dataset$data","dataset","data","setData","useState","setFiles","loading","setLoading","dispatch","useDispatch","params","useParams","formErrors","setFormErrors","datasetId","datasetName","setDatasetName","useEffect","fetchDatasetsThunk","filters","status","DatasetStatus","Live","Retired","payload","dispatchEvents","async","response","sendEvents","Error","success","err","onRemoveAll","pushEvents","datasetConfigurations","dataset_id","configuredBatchKey","configuredBatchId","batchData","Array","isArray","v4","event","id","payloadPromises","payloads","Promise","allSettled","errorCount","successCount","warning","dispatchEventsInParallel","_Fragment","Loader","MainCard","title","Grid","container","spacing","item","xs","sm","Alert","UploadFiles","subscribeErrors","GenericCard","elevation","justifyContent","gutterBottom","Button","filteredItems","filter","_file","contents","all","readJsonFileContents","flattenedContents","content","field","AnimateButton","disabled","e","DeleteOutlinedSvg"],"sourceRoot":""}