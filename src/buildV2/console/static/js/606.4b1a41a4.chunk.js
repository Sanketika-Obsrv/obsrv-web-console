"use strict";(self.webpackChunksunbird_obsrv=self.webpackChunksunbird_obsrv||[]).push([[606],{55574:(e,t,i)=>{i.d(t,{D0:()=>n,WQ:()=>a,cp:()=>l});var s=i(53536),r=i.n(s);const a={type:"custom",searchQuery:{request:{filters:{"context.alertType":"CUSTOM"},options:{order:[["updatedAt","DESC"]]}}},allowedActions:["publish","view","edit","retire","back","refresh","silence"],list:{title:"Alert Rules",showAddAlertBtn:!0},edit:{editableFields:"*"},alerts_warning_message:"No Custom alert rules configured. Click on Add Alerts to create a Custom alert rule"},l={type:"system",searchQuery:{request:{filters:{"context.alertType":"SYSTEM"},options:{order:[["updatedAt","DESC"]]}}},allowedActions:["publish","view","edit","back","refresh","silence"],list:{title:"Alert Rules",showAddAlertBtn:!1},edit:{warningMessage:"Some fields may not be editable for system provisioned alerts.",editableFields:["severity"]},alerts_warning_message:"No System alert rules configured"},n=e=>{var t;switch(r().toLower((null===e||void 0===e||null===(t=e.context)||void 0===t?void 0:t.alertType)||"custom")){case"system":return l;case"custom":return a;default:throw new Error("invalid type")}}},84606:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var s=i(68903),r=i(79226),a=i(53536),l=i.n(a),n=i(65043),o=i(73216),d=i(53764),c=i(51632),u=i(91087),p=i(83547),f=i(99794),y=i(97508),b=i(8387),m=i(69137),h=i(37538),g=i(55574),v=i(67254),w=i(70532),A=i(70579);const x=()=>{const{id:e}=(0,o.g)(),t=(0,o.Zp)(),i=(0,y.wA)(),[a,x]=(0,n.useState)({error:{}}),S={formData:a,setFormData:x,dispatch:i},[C,k]=(0,n.useState)({}),[F,q]=(0,n.useState)(!1),[E,L]=(0,n.useState)({}),j=l().get(C,"context.alertType");(0,n.useEffect)((()=>{e&&(q(!0),(async e=>{try{const t=await(0,d.Kx)({id:e});k(t),L((0,g.D0)(t))}catch(t){i((0,b.z3)({message:"Failed to fetch rule metadata"}))}finally{q(!1)}})(e))}),[e]);const D=e=>{var t;const i=(null===E||void 0===E||null===(t=E.edit)||void 0===t?void 0:t.editableFields)||"*";return"*"===i||l().includes(i,e)},T=(0,n.useMemo)((()=>[{id:"queryBuilder",title:"Query Builder",description:"List down the requirements of your query and set the alert conditions",component:(0,A.jsx)(u.A,{...S,existingState:l().get(C,"metadata.queryBuilderContext"),sectionLabel:"queryBuilder",isFieldEditable:D})},{id:"alertInfo",title:"Rule Configuration",description:"Set the basic information for your alert",component:(0,A.jsx)(c.A,{...S,existingState:l().pick(C,["name","description","interval","frequency","severity"]),sectionLabel:"alertInfo",isFieldEditable:D})},{id:"labels",title:"Labels",description:"Attach labels to your alert",component:(0,A.jsx)(p.A,{...S,existingState:l().pick(C,"labels"),sectionLabel:"labels",isFieldEditable:D})},{id:"notifications",title:"Notification Channel",description:"Configure notification channel for your alert",component:(0,A.jsx)(f.A,{...S,existingState:l().pick(C,"notification"),sectionLabel:"notifications",isFieldEditable:D})}]),[C]);return(0,A.jsxs)(r.A,{content:!1,children:[(()=>{var e;const t=null===E||void 0===E||null===(e=E.edit)||void 0===e?void 0:e.warningMessage;return t?(0,A.jsx)(v.A,{severity:"warning",children:t}):null})(),(0,A.jsx)(s.Ay,{children:F?(0,w.Y)({config:{type:"card",loader:!0,height:80}}):(0,h.H1)({sections:T,formData:a,actionHandler:async()=>{q(!0);try{(0,m.l)(l().get(a,"error"))?(await(()=>{const t=(0,h.F4)({...a,context:{alertType:j}});return(0,d.pi)({id:e,data:t})})(),t(`/alertRules/${l().toLower(j)}`),i((0,b.kX)({message:"Alert Rule updated successfully"}))):i((0,b.z3)({message:"Please fill all required fields"}))}catch(s){i((0,b.z3)({message:"Failed to update alert rule"}))}finally{q(!1)}},actionLabel:"Update Rule"})})]})}}}]);
//# sourceMappingURL=606.4b1a41a4.chunk.js.map