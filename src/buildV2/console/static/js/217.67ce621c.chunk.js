"use strict";(self.webpackChunksunbird_obsrv=self.webpackChunksunbird_obsrv||[]).push([[217],{1195:(e,l,t)=>{t.d(l,{A:()=>u});var a=t(83462),n=t(98533),s=t(42518),r=t(81e3),o=t(4219),i=t(35316),c=t(29347),d=t(73012),h=t(70579);const u=e=>{let{handleClose:l,action:t=null,open:u=!1,context:g={}}=e;return g.show=void 0===g.show||g.show,(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(a.A,{open:u,onClose:l,children:(0,h.jsxs)(r.A,{sx:{p:1,py:1.5},children:[(0,h.jsx)(o.A,{children:null===g||void 0===g?void 0:g.title}),(0,h.jsxs)(i.A,{children:[(0,h.jsx)(n.A,{children:null===g||void 0===g?void 0:g.content}),null===g||void 0===g?void 0:g.component]}),!0===g.show&&(0,h.jsxs)(c.A,{children:[(0,h.jsx)(s.A,{"data-edataid":d.alert_dialog_cancel,color:"error",onClick:e=>l(),children:"Cancel"}),(0,h.jsx)(s.A,{"data-edataid":d.alert_dialog_agree,variant:"contained",onClick:()=>{t&&t(),l(!0)},autoFocus:!0,children:"Agree"})]})]})})})}},75359:(e,l,t)=>{t.d(l,{A:()=>g});var a=t(65043),n=t(74600),s=t(71806),r=t(84882),o=t(28076),i=t(10039),c=t(73460),d=t(71094),h=t(28912),u=t(70579);const g=function(e){let{columns:l,data:t,renderHeader:g}=e;const[A,m]=(0,a.useState)(t||[]),p=(0,a.useMemo)((()=>h.sB),[]),x=(0,a.useMemo)((()=>({Filter:h.ev})),[]),v=(0,a.useMemo)((()=>({filters:[],hiddenColumns:["tags"]})),[]),{getTableProps:f,getTableBodyProps:j,headerGroups:y,rows:C,prepareRow:b,state:w,preGlobalFilteredRows:F,setGlobalFilter:z,toggleRowExpanded:M}=(0,d.useTable)({columns:l,data:A,defaultColumn:x,initialState:v,filterTypes:p,autoResetExpanded:!1},d.useGlobalFilter,d.useFilters,d.useExpanded);return(0,a.useEffect)((()=>{m(t)}),[t]),(0,u.jsxs)(n.A,{spacing:2,children:[g?g({preGlobalFilteredRows:F,setGlobalFilter:z,toggleRowExpanded:M,state:w}):null,(0,u.jsxs)(s.A,{...f(),children:[(0,u.jsx)(r.A,{sx:{borderTopWidth:2},children:y.map((e=>(0,u.jsx)(o.A,{...e.getHeaderGroupProps(),children:e.headers.map((e=>{const{style:l={}}=e;return(0,u.jsx)(i.A,{style:l,...e.getHeaderProps([{className:e.className}]),children:e.render("Header")})}))})))}),(0,u.jsxs)(c.A,{...j(),children:[y.map((e=>(0,u.jsx)(o.A,{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,u.jsx)(i.A,{...e.getHeaderProps([{className:e.className}]),children:e.canFilter?e.render("Filter"):null})))}))),C.map((e=>(b(e),(0,u.jsx)(o.A,{...e.getRowProps(),children:e.cells.map((e=>(0,u.jsx)(i.A,{...e.getCellProps([{className:e.column.className}]),children:e.render("Cell")})))}))))]})]})]})}},93217:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});var a=t(68903),n=t(53536),s=t.n(n),r=t(65043),o=t(34124),i=t(69392),c=t(85865),d=t(74600),h=t(67254),u=t(79226),g=t(8248),A=t(17392),m=t(76191),p=t(77677),x=t(67407),v=t(78240),f=t(73216),j=t(60446),y=t.n(j),C=t(62291),b=t(75359),w=t(43845),F=t(97508),z=t(8387),M=t(42518),H=t(37538),R=t(28912),D=t(70579);const k=e=>{const l=(0,f.Zp)(),[t,n]=(0,r.useState)(!1),{payload:o,channels:i,getAllChannels:h}=e,{preGlobalFilteredRows:u,setGlobalFilter:g,state:A}=o;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(a.Ay,{children:(0,D.jsxs)(a.Ay,{container:!0,spacing:2,direction:"row",justifyContent:"space-between",alignItems:"center",sx:{flexWrap:"nowrap"},children:[(0,D.jsx)(a.Ay,{item:!0,display:"flex",margin:"0.5rem",children:(()=>{const e=s().get(i,"length")||0,l={statusData:(0,H.BS)(i),fetchDataHandler:h,toggleFilter:n,removeFilter:t&&(async()=>{await h(),n(!1)})},a=(0,H.or)(l);return(0,D.jsxs)(d.A,{direction:"column",children:[(0,D.jsx)(c.A,{variant:"h5",mr:1,children:"Notification Channels"}),(0,D.jsxs)(d.A,{direction:"row",alignItems:"center",spacing:2,marginTop:"0.8rem",children:[(0,D.jsxs)(c.A,{children:[e," ",e<=1?"channel":"channels"]}),a()]})]})})()}),(0,D.jsx)(a.Ay,{item:!0,alignItems:"center",display:"flex",children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(R.y4,{preGlobalFilteredRows:u,globalFilter:A.globalFilter,setGlobalFilter:g}),(0,D.jsx)(M.A,{sx:{mx:1},variant:"contained",onClick:e=>l("/alertChannels/new"),children:"Add Channel"})]})})]})})})};var S=t(1195),G=t(70532);const N=[{label:"View",color:"primary",size:"large",isDisabled:e=>!1,icon:(0,D.jsx)(m.A,{}),onClick:e=>{const{payload:l,navigate:t}=e,{id:a}=l;t(`/alertChannels/view/${a}`)}},{label:"Publish",color:"primary",size:"large",icon:(0,D.jsx)(p.A,{}),isDisabled:e=>{const{payload:l}=e,{status:t}=l;return"live"===n.toLower(t)},onClick:e=>{const{payload:l,dispatch:t,getAllChannels:a,setDialogContext:n,setLoading:s}=e,{id:r}=l;n({action:async()=>{s(!0);try{await(0,o.Rn)({id:r}),t((0,z.kX)({message:"Channel published successfully"})),a()}catch(e){t((0,z.z3)({message:"Failed to publish channel"}))}finally{s(!1)}},handleClose:()=>{n(null)},context:(0,H.hQ)({action:"Publish",title:"channel"})})}},{label:"Edit",color:"primary",size:"large",isDisabled:e=>!1,icon:(0,D.jsx)(x.A,{}),onClick:e=>{const{payload:l,navigate:t}=e,{id:a}=l;t(`/alertChannels/edit/${a}`)}},{label:"Retire",color:"error",size:"large",isDisabled:e=>{const{payload:l}=e,{status:t}=l;return"retired"===n.toLower(t)},icon:(0,D.jsx)(v.A,{}),onClick:async e=>{const{payload:l,dispatch:t,getAllChannels:a,setDialogContext:n,setLoading:s}=e,{id:r}=l;n({action:async()=>{s(!0);try{await(0,o.Xd)({id:r}),t((0,z.kX)({message:"Channel retired successfully"})),a()}catch(e){t((0,z.z3)({message:"Failed to retire channel"}))}finally{s(!1)}},handleClose:()=>{n(null)},context:(0,H.hQ)({action:"Retire",title:"channel"})})}}],E=e=>{const{channels:l,getAllChannels:t}=e,[s,o]=(0,r.useState)("false"),[m,p]=(0,r.useState)(!1),x=(0,f.Zp)(),v=(0,F.wA)(),[j,z]=(0,r.useState)(null),M=(0,r.useMemo)((()=>[{Header:"Name",accessor:"name",disableFilters:!0,Cell(e){var l,t;const a=(null===e||void 0===e||null===(l=e.cell)||void 0===l||null===(t=l.row)||void 0===t?void 0:t.original)||{};null===a||void 0===a||a.status;return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(C.A,{display:"flex",alignItems:"center",mb:1,children:["\xa0",(0,D.jsx)(c.A,{align:"left",variant:"subtitle1",children:null===a||void 0===a?void 0:a.name})]})})}},{Header:"Type",accessor:"type",disableFilters:!0,Cell(e){let{value:l}=e;return n.toUpper(l)}},{Header:"Status",accessor:"status",disableFilters:!0,Cell:e=>{var l,t;const a=(null===e||void 0===e||null===(l=e.cell)||void 0===l||null===(t=l.row)||void 0===t?void 0:t.original)||{},{status:n}=a;return(0,D.jsx)(C.A,{minWidth:"7.5rem",children:(0,D.jsx)(w.A,{size:"small",variant:"filled",color:(0,H.wm)(n),label:n.toUpperCase()})})}},{Header:"Created On",accessor:"createdAt",disableFilters:!0,disableGroupBy:!0,Aggregated:()=>null,Cell:e=>{let{value:l,cell:t}=e;return y()(l).format("DD MMMM YYYY h:mm A")||"-"}},{Header:"Updated On",accessor:"updatedAt",disableFilters:!0,disableGroupBy:!0,Aggregated:()=>null,Cell:e=>{let{value:l,cell:t}=e;return y()(l).format("DD MMMM YYYY h:mm A")||"-"}},{Header:"Actions",accessor:"color",disableFilters:!0,Cell:e=>{var l;let{value:a,cell:s}=e;const r=(null===s||void 0===s||null===(l=s.row)||void 0===l?void 0:l.original)||{};return null!==r&&void 0!==r&&r.onlyTag?null:(0,D.jsx)(d.A,{direction:"row",justifyContent:"flex-start",alignItems:"center",children:n.map(N,(o=r,e=>{const{label:l,color:a,size:n,icon:s,onClick:r,isDisabled:c}=e;return(0,D.jsx)(i.A,{title:l,onClick:e=>r({payload:o,dispatch:v,getAllChannels:t,navigate:x,setDialogContext:z,setLoading:p}),children:(0,D.jsx)(A.A,{color:a,size:n,disabled:c({payload:o}),children:s})},Math.random())}))});var o}}]),[]),R=e=>(0,D.jsx)(C.A,{sx:{p:2,pb:0},children:(0,D.jsx)(a.Ay,{item:!0,xs:12,children:(0,D.jsx)(k,{payload:e,channels:l,getAllChannels:t})})});return(0,D.jsx)(a.Ay,{children:(0,D.jsx)(u.A,{content:!1,children:m?(0,G.Y)({config:{type:"table",width:"100%",totallines:6}}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(g.A,{children:(0,D.jsx)(b.A,{columns:M,data:l,renderHeader:R,toggleRefresh:s})}),j?(0,D.jsx)(S.A,{...j,open:!0}):null,!n.size(l)&&(0,D.jsx)(h.A,{severity:"error",children:(0,D.jsx)(c.A,{variant:"body1",children:"No Notification Channels configured. Click on Add Channel to create a new notification channel"})})]})})})},T=e=>{const l=(0,F.wA)(),[t,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)([]),d=async e=>{try{const l={request:{options:{order:[["createdAt","DESC"]]}}},t=await(0,o.$Q)({data:l}),a=s().get(t,"result.notifications")||[],n=s().filter(a,e);c(n)}catch(t){l((0,z.z3)({message:"Something went wrong"}))}finally{n(!1)}};(0,r.useEffect)((()=>{n(!0),d()}),[]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(a.Ay,{container:!0,rowSpacing:2,columnSpacing:2,children:[t&&(0,D.jsx)(a.Ay,{item:!0,xs:12,children:(0,D.jsx)(u.A,{content:!1,children:(0,G.Y)({config:{type:"table",loader:!1,width:"100%",totallines:6}})})}),!t&&(0,D.jsx)(a.Ay,{item:!0,xs:12,children:(0,D.jsx)(E,{channels:i,getAllChannels:d})})]})})}},78240:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(89379),n=t(65043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};var r=t(8436),o=function(e,l){return n.createElement(r.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const i=n.forwardRef(o)},67407:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(89379),n=t(65043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var r=t(8436),o=function(e,l){return n.createElement(r.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const i=n.forwardRef(o)},76191:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(89379),n=t(65043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var r=t(8436),o=function(e,l){return n.createElement(r.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const i=n.forwardRef(o)},77677:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(89379),n=t(65043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};var r=t(8436),o=function(e,l){return n.createElement(r.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const i=n.forwardRef(o)},98533:(e,l,t)=>{t.d(l,{A:()=>v});var a=t(98587),n=t(58168),s=t(65043),r=t(58387),o=t(65049),i=t(34535),c=t(61475),d=t(98206),h=t(85865),u=t(14987),g=t(60239);function A(e){return(0,g.Ay)("MuiDialogContentText",e)}(0,u.A)("MuiDialogContentText",["root"]);var m=t(70579);const p=["children","className"],x=(0,i.Ay)(h.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,l)=>l.root})({}),v=s.forwardRef((function(e,l){const t=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:s}=t,i=(0,a.A)(t,p),c=(e=>{const{classes:l}=e,t=(0,o.A)({root:["root"]},A,l);return(0,n.A)({},l,t)})(i);return(0,m.jsx)(x,(0,n.A)({component:"p",variant:"body1",color:"text.secondary",ref:l,ownerState:i,className:(0,r.A)(c.root,s)},t,{classes:c}))}))}}]);
//# sourceMappingURL=217.67ce621c.chunk.js.map