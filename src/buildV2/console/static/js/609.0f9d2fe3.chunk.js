"use strict";(self.webpackChunksunbird_obsrv=self.webpackChunksunbird_obsrv||[]).push([[609],{29609:(e,a,t)=>{t.d(a,{K:()=>z,A:()=>k});var i=t(65043),s=t(68903),l=t(74600),n=t(63516),r=t(73033),d=t(34535),o=t(81e3),c=t(42518),h=t(33155),u=t(36591),p=t(85865);const x=t.p+"static/media/upload.3dbdf51456962c7667ded3ac578e5daf.svg";var m=t(73012),g=t(81129),f=t(70579);function j(e){let{type:a}=e;return(0,f.jsx)(f.Fragment,{children:a!==g.r.standard&&(0,f.jsxs)(l.A,{"data-edataid":m.file_add_single,"data-edatatype":"DRAG&DROP",spacing:2,alignItems:"center",justifyContent:"center",direction:"row",sx:{width:1,textAlign:{xs:"center",md:"left"}},children:[(0,f.jsx)(u.A,{"data-edataid":m.file_add_single,"data-edatatype":"DRAG&DROP",component:"img",image:x,sx:{width:100}}),(0,f.jsxs)(l.A,{"data-edataid":m.file_add_single,"data-edatatype":"DRAG&DROP",sx:{p:3},spacing:1,children:[(0,f.jsxs)(p.A,{variant:"h6",fontWeight:500,children:["Drag & Drop or "," ",(0,f.jsx)(p.A,{component:"span",variant:"h6",fontWeight:500,color:"primary",sx:{textDecoration:"underline"},children:"Choose File"})," ","to upload"]}),(0,f.jsx)(p.A,{color:"secondary",variant:"subtitle1",textAlign:"left",children:"Max file size allowed 5mb"})]})]})})}const b=(0,d.Ay)("div")((e=>{let{theme:a}=e;return{outline:"none",padding:a.spacing(3,1),borderRadius:a.shape.borderRadius,backgroundColor:a.palette.background.paper,border:`1px dashed ${a.palette.secondary.main}`,"&:hover":{opacity:.72,cursor:"pointer"},maxHeight:128}})),v=e=>{let{error:a,showList:t=!1,files:s,type:n,setFieldValue:r,sx:d,onUpload:u,maxFileSize:p=5242880,subscribeErrors:x=null,isMultiple:v=!0,...A}=e;const{onFileRemove:y}=A||{},{getRootProps:D,getInputProps:S,isDragActive:w,isDragReject:R,fileRejections:F}=(0,h.VB)({multiple:v,onDrop:e=>{if(s&&v){const a=[...s,...e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)})))];r("files",a),u(a)}else{const a=e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)})));r("files",a),u(a)}},accept:{"application/json":[".json"]},maxSize:p});(0,i.useEffect)((()=>{x&&x(F)}),[F]);const _=()=>{r("files",null),y&&y(null)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.A,{sx:{width:"100%",...n===g.r.standard&&{width:"auto",display:"flex"},...d,maxHeight:128},children:(0,f.jsxs)(l.A,{...n===g.r.standard&&{alignItems:"center"},children:[(0,f.jsxs)(b,{"data-edataid":m.file_add_multiple,"data-edatatype":"DRAG&DROP",...D(),sx:{...n===g.r.standard&&{p:0,m:1,width:64,height:64},...w&&{opacity:.72},...(R||a)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,f.jsx)("input",{...S()}),(0,f.jsx)(j,{type:n})]}),n===g.r.standard&&s&&s.length>0&&(0,f.jsx)(c.A,{"data-edataid":m.file_remove_multiple,variant:"contained",color:"error",size:"extraSmall",onClick:_,children:"Remove all"})]})}),n!==g.r.standard&&s&&s.length>0&&(0,f.jsx)(l.A,{direction:"row",justifyContent:"flex-end",spacing:1.5,sx:{mt:1.5},children:(0,f.jsx)(c.A,{"data-edataid":m.file_remove_multiple,color:"inherit",size:"small",onClick:_,children:"Remove all"})})]})};var A=t(97508),y=t(53536),D=t(57904),S=t(24056),w=t(56662);function R(e){let{containerStyle:a={maxWidth:"100%"},initialData:t,onChange:s,...l}=e;const[n,r]=(0,i.useState)(t||{});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{style:a,children:(0,f.jsx)(w.i,{mode:"code",navigationBar:!1,onChange:e=>{s(e),r(e)},onChangeText:e=>{try{JSON.parse(e)}catch(a){s({})}},value:n})})})}var F=t(79074),_=t(8387),C=t(98612);const O=e=>({id:`tab-${e}`,"aria-controls":`tabpanel-${e}`});function z(e){const{children:a,value:t,index:i,...s}=e;return(0,f.jsx)("div",{role:"tabpanel",hidden:t!==i,id:`tabpanel-${i}`,"aria-labelledby":`tab-${i}`,...s,children:t===i&&(0,f.jsx)(o.A,{py:3,children:a})})}const k=e=>{let{data:a,setData:t,files:d,setFiles:c,maxFileSize:h,allowSchema:u=!1,subscribeErrors:p=null,generateInteractTelemetry:x,isMultiple:g=!0,datasetImport:j=!1,setNewFile:b}=e;const w=(0,A.wA)(),[k,E]=(0,i.useState)(0),[P,I]=(0,i.useState)(!1),U=(0,n.Wx)({initialValues:{files:d},onSubmit:e=>{},validationSchema:r.Ik().shape({files:r.gl().required("File is a required.")}),enableReinitialize:!0}),N=e=>y.filter(y.flattenDeep(e),(e=>!y.isEmpty(e)));return(0,f.jsxs)(f.Fragment,{children:[P&&(0,f.jsx)(C.A,{}),(0,f.jsx)(s.Ay,{container:!0,spacing:1,children:(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsxs)(o.A,{sx:{width:"100%"},children:[!j&&(0,f.jsxs)(D.A,{value:k,onChange:(e,a)=>{switch(a){case 0:x&&x({edata:{id:m.upload_sample_file}});break;case 1:x&&x({edata:{id:m.editor_schema}})}E(a)},variant:"fullWidth",children:[(0,f.jsx)(S.A,{label:u?"Upload JSON Data/Schema":"Upload JSON Data",...O(0)}),(0,f.jsx)(S.A,{label:u?"Paste/Edit JSON Data/Schema":"Paste/Edit JSON Data",...O(1)})]}),(0,f.jsx)(z,{value:k,index:0,children:(0,f.jsx)("form",{onSubmit:U.handleSubmit,children:(0,f.jsx)(s.Ay,{container:!0,spacing:3,children:(0,f.jsx)(s.Ay,{item:!0,xs:12,children:(0,f.jsx)(l.A,{spacing:1.5,alignItems:"center",children:(0,f.jsx)(v,{showList:!1,setFieldValue:U.setFieldValue,files:U.values.files,error:U.touched.files&&!!U.errors.files,onUpload:async e=>{I(!0);try{j&&b(!1);const a=await Promise.all(e.map((e=>(0,F.lb)(e)))),i=N(a);if(0===y.size(i))throw new Error("Invalid file content");t(i),c(e),w((0,_.kX)({message:"Files uploaded."}))}catch(a){(null===a||void 0===a?void 0:a.message)&&w((0,_.z3)({message:null===a||void 0===a?void 0:a.message})),"string"===typeof a&&w((0,_.z3)({message:a})),c(null),U.setFieldValue("files",null),t(null)}finally{I(!1)}},onFileRemove:e=>{c(e)},maxFileSize:h,subscribeErrors:p,isMultiple:g})})})})})}),(0,f.jsxs)(z,{value:k,index:1,children:[(0,f.jsx)(R,{initialData:a,onChange:e=>{const a=y.isArray(e)?e:[e]||0,i=N(a);if(a&&y.isEmpty(i))return w((0,_.z3)({message:"Paste valid JSON Data/Schema"})),void t();t(a)}}),(0,f.jsx)(l.A,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1.5,sx:{mt:1.5}})]})]})})})]})}},81129:(e,a,t)=>{t.d(a,{r:()=>i});let i=function(e){return e.default="DEFAULT",e.standard="STANDARD",e}({})}}]);
//# sourceMappingURL=609.0f9d2fe3.chunk.js.map